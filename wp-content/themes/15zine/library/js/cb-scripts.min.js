/* global jQuery, cbScripts, cookie, 2.2 */
!function(e){"use strict"
var a=e("#cb-overlay"),s=e("body"),t=e(window),i=e(document),c=t.height()+1,l=t.width(),r=e("#main"),o=r.find(".cb-entry-content"),n=o.find(".alignnone"),d=e(".cb-main-nav"),b=d.children(),f=e(".cb-slider-1"),h=e(".cb-slider-2"),p=e(".cb-slider-3"),m=e("html, body"),u=e("#cb-to-top"),g=e(".cb-module-block-fs"),v=e("#cb-container"),C=e("#cb-content"),w=e(".cb-vertical-down"),y=e("#cb-featured-image"),x=e(".cb-fis-fs"),k=e("#cb-parallax-bg"),S=e("#cb-gallery-post"),T=e("#cb-nav-bar"),I=e("#cb-s-trigger"),D=e("#cb-menu-search"),P=D.find("input"),M=e("#cb-trend-menu-item"),O,Y=0,_=0,j=0,A=0,H=D.find("#cb-s-results"),N=e("#cb-lwa"),F=e("#cb-lwa-trigger"),z=e(".cb-close-m").add(a),E=N.find(".cb-title-trigger"),G=N.find(".lwa-form"),V=G.find(".cb-form-input-username"),K=v.find(".cb-sticky-sidebar"),U=K.find(".cb-sidebar"),B=U.css("padding-top"),Q=[9,13,16,17,18,20,32,45,116],W=e("#cb-footer"),X=e("#cb-mob-open"),q=e("#cb-mob-close"),L=e("#cb-media-play"),R=!0,J=e("#cb-blog-infinite-scroll"),Z=e("#cb-section-lp"),$=e("#cb-top-menu").find(".cb-top-menu-wrap"),ee=e("#cb-review-container").find(".cb-overlay span"),ae=e("#cb-par-wrap").find(".cb-image"),se=y.attr("data-cb-bs-fis"),te=s.attr("data-cb-bg"),ie,ce=!1,le=!1,re=!1,oe=!1,ne=!1,de,be,fe,he,pe,me,ue,ge=o.find("iframe"),ve=!1
if((s.hasClass("cb-body-tabl")||s.hasClass("cb-body-mob"))&&(ve=!0),void 0!==se&&(y.hasClass("cb-fis-not-bg")?y.backstretch(se,{fade:1250}):y.hasClass("cb-fis-block-slideshow")?e.backstretch(se.split(","),{fade:750,duration:5e3}):e.backstretch(se,{fade:1250})),void 0!==te&&(s.backstretch(te,{fade:750}),s.removeAttr("data-cb-bg")),f.each(function(){var a=e(this)
a.hasClass("cb-recent-slider")||a.find(".slides > li").css("height",a.width()/2.333333)}),s.hasClass("rtl")&&(ne=!0),s.hasClass("admin-bar")&&(le=!0),T.length&&l>767&&(ue=T.outerHeight()),Z.length&&(K=Z.find(".cb-sticky-sidebar"),U=K.find(".cb-sidebar"),B=U.css("padding-top")),x.length){var Ce=y.offset().top
ie=c-Ce}T.css("height",ue),x.css("height",ie),k.css("height",c),S.length&&S.find("img").css("height",c+1),ge.each(function(){var a=e(this).attr("src")
a&&(a.indexOf("yout")>-1||a.indexOf("vimeo")>-1||a.indexOf("daily")>-1)&&e(this).wrap('<div class="cb-video-frame"></div>')}),X.click(function(e){e.preventDefault(),s.addClass("cb-mob-op")}),M.click(function(e){e.preventDefault()}),q.click(function(e){e.preventDefault(),s.removeClass("cb-mob-op")})
function we(){O=le===!0?l>781?t.scrollTop()+32:t.scrollTop()+46:t.scrollTop(),ye()}function ye(){re||(requestAnimationFrame(ke),re=!0)}function xe(){ce===!1&&(ke(),ke(),ce=!0)}function ke(){if(s.hasClass("cb-sticky-mm")&&(s.hasClass("cb-sticky-menu-up")?(O>=be&&Y>O?s.addClass("cb-stuck"):s.removeClass("cb-stuck"),Y=O):O>=be?s.addClass("cb-stuck"):s.removeClass("cb-stuck")),l>767&&ve===!1&&K.length){var a=K.offset().top,t=U.outerHeight(!0),i=W.offset().top,o=a+t,n=c+O,d=e("#cb-outer-container").css("margin-top"),b=0
"0px"!=d&&(b=parseFloat(d)),oe===!1&&(fe=t,oe=!0),t>fe&&(fe=t,o=a+t,j=o),fe>c?(K.css("height",fe),s.removeClass("cb-stuck-sb-t"),s.hasClass("cb-stuck-sb")?(!W.visible(!0)&&i>O?(s.removeClass("cb-footer-vis"),U.css("top","auto")):(s.addClass("cb-footer-vis"),U.css("top",i-fe-b+"px")),j>n&&s.removeClass("cb-stuck-sb")):(n>o&&i>O&&O>a&&(s.addClass("cb-stuck-sb"),j=o),n>i&&s.addClass("cb-footer-vis"))):(le===!0?(de=ue+32,A=a-parseInt(B,10)-ue+32):(de=ue,A=a-parseInt(B,10)-ue),K.css("height",fe),s.hasClass("cb-stuck-sb")?(i>n-(c-fe)?(s.removeClass("cb-footer-vis"),s.hasClass("cb-stuck")?U.css("top",de):U.css("top","0")):(s.addClass("cb-footer-vis"),U.css("top",i-fe+"px")),A>O&&(s.removeClass("cb-stuck-sb cb-stuck-sb-t"),s.hasClass("cb-stuck")?U.css("top",de):U.css("top","0"))):(s.hasClass("cb-stuck")&&!s.hasClass("cb-fis-big-block")&&U.css("top",de),O>=A&&(s.addClass("cb-stuck-sb cb-stuck-sb-t"),s.hasClass("cb-fis-big-block")&&U.css("top",de))))}if(768>l&&le===!0&&(92-O>=0?(s.removeClass("cb-tm-stuck"),32==O?$.css("top",46):$.css("top",92-O)):(s.addClass("cb-tm-stuck"),$.css("top",0))),0!==ae.length&&ve===!1)if(c>O){s.removeClass("cb-par-hidden"),le===!0&&(O-=32)
var f=O/2,h=f+"px"
ae.css({"-webkit-transform":"translate3d(0, "+h+", 0)",transform:"translate3d(0, "+h+", 0)"})}else s.addClass("cb-par-hidden")
if(J.length&&R===!0){var p=e("#main").children().last(),m=p.attr("id"),u=p.prev()
if(u.hasClass("cb-grid-x")&&(u=u.children().last()),"cb-blog-infinite-scroll"===m&&u.visible(!0)){R=!1
var g=e("#cb-blog-infinite-scroll").find("a").attr("href")
r.addClass("cb-pre-load cb-pro-load"),e.get(g,function(a){var s,t
t=e(a).filter("#cb-outer-container").find("#main"),e(t).find(".cb-category-top, .cb-module-header, .cb-grid-block, .cb-breadcrumbs").remove(),s=t.html(),e("#main").children().last().remove(),e("#main").append(s),r.removeClass("cb-pro-load")})}}e.each(ee,function(a,s){var t=e(s)
t.visible(!0)&&t.addClass("cb-trigger")}),re=!1}window.addEventListener("scroll",we,!1),n.each(function(){var a=e(this)
if(s.hasClass(cbScripts.cbFsClass))if(a.hasClass("wp-caption")){var t=a.find("img")
t.hasClass("size-full")&&(ne===!0?a.css({"margin-right":o.width()/2-l/2,"max-width":"none"}).addClass("cb-fs-embed"):a.css({"margin-left":o.width()/2-l/2,"max-width":"none"}).addClass("cb-fs-embed"),a.add(t).css("width",l))}else a.hasClass("size-full")&&(ne===!0?a.css({"margin-right":o.width()/2-l/2,"max-width":"none",width:l}):a.css({"margin-left":o.width()/2-l/2,"max-width":"none",width:l}))}),w.click(function(e){e.preventDefault(),s.hasClass("page-template-page-15zine-builder")?m.animate({scrollTop:C.offset().top-60},1500):m.animate({scrollTop:r.offset().top-60},1500)}),u.click(function(e){e.preventDefault(),m.animate({scrollTop:0},1500)}),e(".cb-module-half:odd").each(function(){e(this).prev().addBack().wrapAll(e("<div/>",{"class":"cb-double-block clearfix"}))}),g.each(function(){var a=e(this)
a.css({"margin-left":C.width()/2-l/2,"max-width":"none",width:l})}),F.click(function(e){e.preventDefault(),s.addClass("cb-lwa-modal-on"),ve===!1&&V.focus()}),I.click(function(e){e.preventDefault(),s.addClass("cb-s-modal-on"),ve===!1&&P.focus()}),L.click(function(e){e.preventDefault(),s.addClass("cb-m-modal-on"),Ee()}),z.click(function(){s.removeClass("cb-lwa-modal-on cb-s-modal-on cb-m-modal-on"),Ge()}),i.keyup(function(e){27==e.keyCode&&(s.removeClass("cb-lwa-modal-on cb-s-modal-on cb-m-modal-on"),Ge())})
var Se=N.find(".lwa-form"),Te=N.find(".lwa-remember"),Ie=N.find(".lwa-register-form")
E.click(function(a){a.preventDefault()
var s=e(this)
E.removeClass("cb-active"),s.addClass("cb-active"),s.hasClass("cb-trigger-reg")?(Se.add(Te).removeClass("cb-form-active"),Ie.addClass("cb-form-active")):s.hasClass("cb-trigger-pass")?(Ie.add(Se).removeClass("cb-form-active"),Te.addClass("cb-form-active")):(Ie.add(Te).removeClass("cb-form-active"),Se.addClass("cb-form-active"))}),e(".tiled-gallery").find("a").attr("rel","tiledGallery"),e(".gallery").find("a").attr("rel","tiledGallery"),e(document).ready(function(e){T.length&&l>767&&(be=T.offset().top),e(".cb-toggler").find(".cb-toggle").click(function(a){a.preventDefault(),e(this).parent().toggleClass("cb-on")}),e(".cb-tabs").find("> ul").tabs(".cb-panes .cb-tab-content"),r.find(".hentry").find("a").has("img").each(function(){var a=e("img",this).attr("title"),s=e(this).attr("href"),t=e(this).attr("rel")
if(void 0!==a&&e(this).attr("title",a),void 0!==s&&"prettyPhoto[product-gallery]"!==t){var i=s.split("."),c=e(i)[e(i).length-1];("jpg"===c||"jpeg"===c||"png"===c||"gif"===c||"tif"===c)&&e(this).addClass("cb-lightbox")}}),e(".cb-video-frame").fitVids(),e.prototype.boxer&&e(".cb-lightbox").boxer({fixed:!0}),e(".cb-tip-bot").tipper({direction:"bottom",follow:!0}),f.flexslider({maxItems:1,minItems:1,startAt:1,keyboard:!0,multipleKeyboard:!0,animation:"slide",slideshow:cbScripts.cbSlider[1],slideshowSpeed:cbScripts.cbSlider[2],animationSpeed:cbScripts.cbSlider[0],pauseOnHover:cbScripts.cbSlider[3],controlNav:!1,nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),e(".cb-slider-grid-3").flexslider({maxItems:1,minItems:1,startAt:1,keyboard:!0,multipleKeyboard:!0,animation:"slide",slideshow:cbScripts.cbSlider[1],slideshowSpeed:cbScripts.cbSlider[2],animationSpeed:cbScripts.cbSlider[0],pauseOnHover:cbScripts.cbSlider[3],itemMargin:3,controlNav:!1,nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),pe=s.hasClass("cb-sidebar-none-fw")?3:2,h.flexslider({maxItems:pe,startAt:0,minItems:1,animation:"slide",slideshow:cbScripts.cbSlider[1],slideshowSpeed:cbScripts.cbSlider[2],animationSpeed:cbScripts.cbSlider[0],pauseOnHover:cbScripts.cbSlider[3],itemWidth:300,itemMargin:3,controlNav:!1,nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),p.flexslider({maxItems:3,minItems:1,startAt:0,animation:"slide",slideshow:cbScripts.cbSlider[1],slideshowSpeed:cbScripts.cbSlider[2],animationSpeed:cbScripts.cbSlider[0],pauseOnHover:cbScripts.cbSlider[3],itemWidth:300,itemMargin:3,controlNav:!1,nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),ve===!1?b.hoverIntent(function(){s.addClass("cb-mm-on")},function(){s.removeClass("cb-mm-on")}):b.on("click",function(a){var t=e(this)
return t.siblings(".cb-tap").removeClass("cb-tap"),t.hasClass("cb-tap")?!0:(a.preventDefault(),s.addClass("cb-mm-on"),t.addClass("cb-tap"),void 0)}),m.on("mousewheel DOMMouseScroll",function(){m.stop()}),i.ajaxStop(function(){R=!0,e(".cb-pro-load").removeClass("cb-pro-load")}),C.on("click","#cb-blog-infinite-load a",function(a){a.preventDefault()
var s=e(this).attr("href"),t=e(this).parent()
e(this).hasClass("cb-pre-load")||(r.addClass("cb-pre-load cb-pro-load"),e(this).addClass("cb-pre-load"),e.get(s,function(a){var s,i
i=e(a).filter("#cb-outer-container").find("#main"),e(i).find(".cb-category-top, .cb-module-header, .cb-grid-block, .cb-breadcrumbs").remove(),e(i).children().addClass("cb-slide-visible"),s=i.html(),e("#main").append(s),r.removeClass("cb-pro-load"),t.addClass("cb-hidden")}))}),e(".cb-c-l").hoverIntent(function(){var a=e(this),s=e(this).text(),t=a.closest("div")
if(t.hasClass("cb-big-menu")){var i=a.attr("data-cb-c"),c=a.attr("href"),l=e(t[0].firstChild),r=l.find("ul"),o=l.find(".cb-upper-title"),n=o.find(".cb-see-all"),d=o.find("h2")
d.text()!==s&&e.ajax({type:"GET",data:{action:"cb_mm_a",cid:i,acall:1},url:cbScripts.cbUrl,beforeSend:function(){l.addClass("cb-pro-load")},success:function(a){d.text(s),r.html(e(a)),n.attr("href",c)},error:function(e,a,s){console.log("cbmm "+e+" :: "+a+" :: "+s)}})}},function(){}),e(".cb-trending-op").click(function(a){a.preventDefault()
var s=e(this),t=e("#cb-trending-block"),i=t.find(".cb-trending-op"),c=t.find("#cb-trend-data"),l=s.attr("data-cb-r")
s.hasClass("cb-selected")||e.ajax({type:"GET",data:{action:"cb_t_a",cbr:l},url:cbScripts.cbUrl,beforeSend:function(){t.addClass("cb-pro-load")},success:function(a){i.removeClass("cb-selected"),s.addClass("cb-selected"),c.html(e(a))},error:function(e,a,s){console.log("cbr "+e+" :: "+a+" :: "+s)}})}),P.keyup(function(t){_&&clearTimeout(_),27==t.keyCode?s.removeClass("cb-lwa-modal-on"):-1==e.inArray(t.keyCode,Q)&&(s.hasClass("cb-las-off")||(_=setTimeout(a,300)))})
function a(){var a=P.val()
0===a.length&&H.empty(),a.length<3||e.ajax({type:"GET",data:{action:"cb_s_a",cbi:a},url:cbScripts.cbUrl,beforeSend:function(){D.find(".cb-s-modal-inner").addClass("cb-pro-load")},success:function(a){D.addClass("cb-padded"),H.html(e(a)),e("#cb-s-all-results").click(function(a){a.preventDefault(),e("#cb-s-results").prev().trigger("submit")})},error:function(e,a,s){console.log("cbsa "+e+" :: "+a+" :: "+s)}})}if(x.length){var t=y.offset().top,o=c-t
x.css("height",o),k.css("height",c)}}),e(window).load(function(){var a=e(".tabbernav"),i=a.children().length
4===i&&a.addClass("cb-tab-4"),3===i&&a.addClass("cb-tab-3"),2===i&&a.addClass("cb-tab-2"),1===i&&a.addClass("cb-tab-1"),O=le===!0?t.scrollTop()+32:t.scrollTop(),xe(),l>767?S.flexslider({nextText:'<i id="cb-gallery-next" class="fa fa-angle-right"></i>',prevText:'<i id="cb-gallery-prev" class="fa fa-angle-left"></i>',animation:"slide",startAt:1,keyboard:!0,multipleKeyboard:!0,controlNav:!1,itemMargin:5,slideshow:!1,variableImageWidth:!0,start:function(){S.removeClass("cb-background-preload").find(".cb-meta").addClass("cb-ani-fade-in-1-5s")}}):S.flexslider({nextText:'<i id="cb-gallery-next" class="fa fa-angle-right"></i>',prevText:'<i id="cb-gallery-prev" class="fa fa-angle-left"></i>',animation:"slide",startAt:0,keyboard:!0,multipleKeyboard:!0,controlNav:!1,itemMargin:0,slideshow:!1,start:function(){S.removeClass("cb-background-preload").find(".cb-meta").addClass("cb-ani-fade-in-1-5s")}})
var c=S.find("#cb-gallery-next, #cb-gallery-prev").parent()
if(c.hover(function(){s.toggleClass("cb-arrows-hover")}),ve===!0){c.on("tap",function(){s.addClass("cb-arrows-hover")})
var r=S.find(".cb-link-overlay")
r.on("tap",function(){s.removeClass("cb-arrows-hover")}),r.on("swipe",function(){s.addClass("cb-arrows-hover")})}}),e(window).resize(function(){var a,i
c=t.height()+1,l=t.width(),f.each(function(){var a=e(this)
a.hasClass("cb-recent-slider")||a.find(".slides > li").css("height",a.width()/2.333333)}),(x.length||S.length)&&(a=y.offset().top,i=c-a),k.css("height",c),x.css("height",i),s.hasClass("cb-stuck")||T.length&&l>767&&(T.css("height",""),ue=T.outerHeight(),T.css("height",ue)),g.each(function(){var a=e(this),s=t.width()
a.css({"margin-left":C.width()/2-s/2,"max-width":"none",width:s})}),n.each(function(){var a=e(this)
if(s.hasClass(cbScripts.cbFsClass))if(a.hasClass("wp-caption")){var t=a.find("img")
t.hasClass("size-full")&&(ne===!0?a.css({"margin-right":o.width()/2-l/2,"max-width":"none"}).addClass("cb-fs-embed"):a.css({"margin-left":o.width()/2-l/2,"max-width":"none"}).addClass("cb-fs-embed"),a.add(t).css("width",l))}else a.hasClass("size-full")&&(ne===!0?a.css({"margin-right":o.width()/2-l/2,"max-width":"none",width:l}):a.css({"margin-left":o.width()/2-l/2,"max-width":"none",width:l}))})})
var De=e("#cb-vote"),Pe=e(".cb-criteria-score.cb-average-score"),Me=De.find(".cb-criteria"),Oe=Me.attr("data-cb-text"),Ye=De.find(".cb-overlay"),_e,je,Ae,He
Ye.length?(_e=Ye.find("span"),je=De.not(".cb-voted").find(".cb-overlay"),Ae=_e.css("width")):(Ye=De.find(".cb-overlay-stars"),He=je=De.not(".cb-voted").find(".cb-overlay-stars"),_e=Ye.find("span"),Ae=_e.css("width"),"125px"!==Ae&&_e.addClass("cb-zero-stars-trigger"))
var Ne=Pe.text(),Fe=Me.html()
je.on("mousemove click mouseleave mouseenter",function(a){var s=e(this).parent().offset(),t=e(this).offset(),i,c,l=De.width()/100,r=Ye.width()/100
return De.hasClass("stars")?Math.round(t.left)<=a.pageX&&(c=Math.round((a.pageX-Math.round(t.left))/r),i=(Math.round(10*c/20)/10).toFixed(1),0>i&&(i=0),i>5&&(i=5),he=ne===!0?c:100-c):(c=Math.ceil((a.pageX-s.left)/l),he=ne===!0?100-c:c),De.hasClass("points")?(i=ne===!0?((100-c)/10).toFixed(1):(c/10).toFixed(1),Pe.text(i)):De.hasClass("percentage")&&(i=ne===!0?100-c+"%":c+"%",Pe.text(i)),_e.hasClass("cb-bar-ani")&&_e.removeClass("cb-bar-ani"),_e.hasClass("cb-bar-ani-stars")&&_e.removeClass("cb-bar-ani-stars").css("width",100-c+"%"),he>100&&(he=100),1>he&&(he=0),_e.css("width",he+"%"),"mouseenter"==a.type&&Me.fadeOut(75,function(){e(this).fadeIn(75).text(Oe)}),"mouseleave"==a.type&&(_e.animate({width:Ae},300),Pe.text(Ne),Me.fadeOut(75,function(){e(this).fadeIn(75).html(Fe)})),"click"==a.type?(me=De.attr("data-cb-nonce"),De.hasClass("points")&&(i=10*i),De.hasClass("stars")&&(i=20*i),s=e(this).parent().offset(),Ye.off("mousemove click mouseleave mouseenter"),e.ajax({type:"POST",data:{action:"cb_a_s",cburNonce:me,cbNewScore:parseInt(i),cbPostID:cbScripts.cbPostID},url:cbScripts.cbUrl,dataType:"json",success:function(a){var s=a[0],t=a[2]
Me.fadeOut(550,function(){e(this).fadeIn(550).html(Fe).find(".cb-votes-count").html(t)}),"-1"!==s&&"null"!==s&&(De.hasClass("points")?Pe.html((s/10).toFixed(1)):De.hasClass("percentage")?Pe.html(s+"%"):s=100-s,_e.css("width",s+"%"),De.addClass("cb-voted cb-tip-bot").off("click")),De.tipper({direction:"bottom",follow:!0}),cookie.enabled()&&cookie.set({cb_post_left_rating:"1"},{expires:28})},error:function(e,a,s){console.log("cbur "+e+" :: "+a+" :: "+s)}}),!1):void 0})
var ze=jQuery("#cb-yt-player")
function Ee(){ve===!1&&ze.length>0&&cbYTPlayerHolder.playVideo()}function Ge(){ve===!1&&ze.length>0&&cbYTPlayerHolder.pauseVideo()}}(jQuery)
var cbYTPlayerHolder,CbYTPlayer=jQuery("#cb-yt-player"),cbYouTubeVideoID=CbYTPlayer.text()
if(CbYTPlayer.length>0){var tag=document.createElement("script")
tag.src="//www.youtube.com/iframe_api"
var firstScriptTag=document.getElementsByTagName("script")[0]
firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}function onYouTubeIframeAPIReady(){CbYTPlayer.length>0&&(cbYTPlayerHolder=new YT.Player("cb-yt-player",{videoId:cbYouTubeVideoID}))}